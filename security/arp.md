### ARP
ARP（Address Resolution Protocol）地址转换协议，工作在OSI模型的数据链路层，在以太网中，网络设备之间互相通信是用MAC地址而不是IP地址，ARP协议就是用来把IP地址转换为MAC地址的。而RARP和ARP相反，它是反向地址转换协议，把MAC地址转换为IP地址

#### 中间人攻击防御
- 在主机绑定网关MAC与IP地址为静态（默认为动态），命令：arp -s 网关IP 网关MAC
- 在网关绑定主机MAC与IP地址
- 使用ARP防火墙

#### SSL 中间人攻击原理
##### SSL劫持攻击
- SSL劫持攻击即SSL证书欺骗攻击，攻击者为了获得HTTPS传输的明文数据，需要先将自己接入到客户端和目标网站之间；
- 在传输过程中伪造服务器的证书，将服务器的公钥替换成自己的公钥，这样，中间人就可以得到明文传输带Key1、Key2和Pre-Master-Key，从而窃取客户端和服务端的通信数据；
- 但是对于客户端来说，如果中间人伪造了证书，在校验证书过程中会提示证书错误，由用户选择继续操作还是返回，由于大多数用户的安全意识不强，会选择继续操作，此时，中间人就可以获取浏览器和服务器之间的通信数据

##### SSL剥离攻击
- 这种攻击方式也需要将攻击者设置为中间人，之后见HTTPS范文替换为HTTP返回给浏览器，而中间人和服务器之间仍然保持HTTPS服务器
- 由于HTTP是明文传输的，所以中间人可以获取客户端和服务器传输数据

#### HTTPS连接过程
##### https请求 
客户端向服务端发送https请求
##### 生成公钥和私钥 
服务端收到请求之后，生成公钥和私钥。公钥相当于是锁，私钥相当于是钥匙，只有私钥才能够打开公钥锁住的内容
##### 返回公钥 
服务端将公钥（证书）返回给客户端，公钥里面包含有很多信息，比如证书的颁发机构、过期时间等等
##### 客户端验证公钥 
客户端收到公钥之后，首先会验证其是否有效，如颁发机构或者过期时间等，如果发现有问题就会抛出异常，提示证书存在问题。如果没有问题，那么就生成一个随机值，作为客户端的密钥，然后用服务端的公钥加密
##### 发送客户端密钥 
客户端用服务端的公钥加密密钥，然后发送给服务端
##### 服务端收取密钥，对称加密内容 
服务端收到经过加密的密钥，然后用私钥将其解密，得到客户端的密钥，然后服务端把要传输的内容和客户端的密钥进行对称加密，这样除非知道密钥，否则无法知道传输的内容
##### 加密传输 
服务端将经过加密的内容传输给客户端
##### 获取加密内容，解密 
客户端获取加密内容后，用之前生成的密钥对其进行解密，获取到内容

#### Https安全性问题、双向验证防止中间人攻击
服务器端对请求它的客户端要进行身份验证，客户端对自己所请求的服务器也会做身份验证
服务端一旦验证到请求自己的客户端为不可信任的，服务端就拒绝继续通信
客户端如果发现服务端为不可信任的，那么也中止通信
