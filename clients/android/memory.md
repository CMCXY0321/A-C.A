#### Java 内存区域
Java虚拟机在执行程序过程中会把管理的内存划分为不同的数据区域：
- 方法区：方法区存放的是类信息、常量、静态变量，所有线程共享区域
- 虚拟机栈：它的生命周期与线程相同，
           每个方法在执行的同时都会创建一个栈帧（Stack Frame）用存储局部变量表、操作数栈、动态链接、方法出口等信息，线程私有区域
- 本地方法栈：与虚拟机栈类似，区别是虚拟机栈为虚拟机执行Java方法服务，本地方法栈为虚拟机使用到的Native方法
- 堆：线程共享；用来存放对象实例，几乎所有的对象实例都在堆上分配内存；
     此区域也是垃圾回收器（Garbage Collection）主要的作用区域，内存泄漏就发生在这个区域
- 程序计数器：用于指示当前线程所执行的字节码执行到了第几行，可以理解为是当前线程的行号指示器
             如果线程在执行Java方法，这个计数器记录的是正在执行的虚拟机字节码指令地址

#### 程序计数器
Java虚拟机中的程序计数器是Java运行时数据区中的一小块内存区域，但是它的功能和通常的程序计数器是类似的，它指向虚拟机正在执行字节码指令的地址

#### 虚拟机栈（JVM Stack）
与程序计数器一样，Java 虚拟机栈(Java Virtual Machine Stacks)也是线程私有的，它的生命周期与线程相同

#### 本地方法栈（Native Method Statck）
本地方法栈(Native Method Stacks)与虚拟机栈所发挥的作用是非常相似的，其区别不过是虚拟机栈为 
虚拟机执行 Java 方法（也就是字节码）服务，而本地方法栈则是为虚拟机使用到的 Native 方法服务

#### 堆区（Heap）
对于大多数应用来说，Java 堆(Java Heap)是 Java 虚拟机所管理的内存中最大的一块

#### 方法区（Method Area）
方法区(Method Area)与 Java 堆一样，是各个线程共享的内存区域，它用于存储已被虚拟机加载的类、信息、常量、静态变量、即时编译器编译后的代码等数据

#### 运行时常量池
运行时常量池(Runtime Constant Pool)是方法区的一部分
Class 文件中除了有类的版本、字段、 方法、接口等描述等信息外，
还有一项信息是常量池(Constant Pool Table)，用于存放编译期生成的各种字 面量和符号引用，这部分内容将在类加载后存放到方法区的运行时常量池中

#### 对象的创建
- 检查这个指令的参数是否能在常量池中定位到一个类的符号引用，并且检查这个符号引用代表的类是否已被加载、解析和初始化过
- 类加载检查通过
- 虚拟机java堆为新主对象分配内存，对象所需内存的大小在类加载完成后确定
- 虚拟机将分配到的内存空间都初始化为零值
- 设置对象头，对象头中存储了该对象是拿了类的实例等信息
- 执行 init 方法，把对象初始化

#### 对象的访问

#### 句柄方式
Java 堆中将会划分出一块内存 来作为句柄池，reference 中存储的就是对象的句柄地址，而句柄中包含了对象实例数据和类型数据各自的具体地址信息

#### 直接指针方式
Java 堆对象的布局中就必须考虑如何放置访问类型数据的相关信息， 
reference 中直接存储的就是对象地址

